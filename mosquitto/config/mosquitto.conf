# Mosquitto configuration file
# For MQTT broker serving Zigbee2MQTT and Home Assistant

# Default listener
listener 1883
protocol mqtt

# WebSocket listener for browser-based clients
listener 9001
protocol websockets

# Store messages to disk
persistence true
persistence_location /mosquitto/data/

# User authentication
# password_file /mosquitto/config/passwd

# Security settings
allow_anonymous true

# Maximum number of connections
max_connections -1

# Message limits
max_queued_messages 1000

# Client connection timeout
max_inflight_messages 20

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type all

# Set default ACL
# acl_file /mosquitto/config/acl.acl

# Connection limits
connection_messages true

# Auto-save interval (in seconds)
autosave_interval 1800

